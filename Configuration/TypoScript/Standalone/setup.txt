####################################################
# Static template using YAG as a standalone plugin
#
# @author Daniel Lienert <daniel@lienert.cc> 
# @author Michael Knoll <mimi@kaktusteam.de>
# @package YAG
# @subpackage Typoscript
####################################################

## Include YAG basic settings
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:yag/Configuration/TypoScript/setup.txt">


## Do some standalone-specific configuration
#plugin.tx_yag.settings.extlist.albumList.pager.itemsPerPage = 16


####################################################
# Setting up configuration for widgets 
####################################################

plugin.tx_yag.widgets {

    albumWidget = USER
    albumWidget {
        userFunc = tx_extbase_dispatcher->dispatch
        pluginName = Pi1
        extensionName = Yag
        controller = Album
        action = show
        switchableControllerActions {
            1 {
                controller = Album
                actions = show
            }
        }
        settings =< plugin.tx_yag.settings
        persistence =< plugin.tx_yag.persistence
        view =< plugin.tx_yag.view
    }
    
    
    
    galleryWidget = USER
    galleryWidget {
        userFunc = tx_extbase_dispatcher->dispatch
        pluginName = Pi1
        extensionName = Yag
        controller = Gallery
        action = list
        switchableControllerActions {
            1 {
                controller = Gallery
                actions = list,index,new,create,edit,update,delete
            }
            2 {
                controller = ItemList
                actions = list
            }
            3 {
                controller = ItemList
                actions = submitFilter, resetFilter
            }
            4 {
                controller = Album
                actions = delete
            }
            5 {
                controller = Item
                actions = show, delete
            }
            6 {
                controller = Development
                actions = createSampleData, deleteAll
            }
            7 {
                controller = Feeds
                actions = rss
            }   
            8 {
                controller = Remote
                actions = addItemToAlbum,galleryList,albumList,testConnection
            }
            9 {
                controller = Development
                actions = deleteAll, createSampleData, testExif
            }
            10 {
                controller = ZipImport
                actions = showImportForm, importFromZip, createNewAlbumAndImportFromZip
            }
            11 {
                controller = DirectoryImport
                actions = showImportForm, importFromDirectory
            }
        }
        settings =< plugin.tx_yag.settings
        persistence =< plugin.tx_yag.persistence
        view =< plugin.tx_yag.view
    }
    
    
    
    adminMenuWidget = USER
    adminMenuWidget {
        userFunc = tx_extbase_dispatcher->dispatch
        pluginName = Pi1
        extensionName = Yag
        controller = AdminMenu
        action = index
        switchableControllerActions {
            1 {
                controller = AdminMenu
                actions = index
            }
        }
        settings =< plugin.tx_yag.settings
        persistence =< plugin.tx_yag.persistence
        view =< plugin.tx_yag.view
    }
    
    
    
    flashMessagesWidget = USER
    flashMessagesWidget {
        userFunc = tx_extbase_dispatcher->dispatch
        pluginName = Pi1
        extensionName = Yag
        controller = FlashMessages
        action = index
        switchableControllerActions {
            1 {
                controller = FlashMessages
                actions = index
            }
        }
        settings =< plugin.tx_yag.settings
        persistence =< plugin.tx_yag.persistence
        view =< plugin.tx_yag.view
    }

}



####################################################
# Setting up template for gallery standalone usage
####################################################

yag = PAGE
yag {

    typeNum = 0

    includeCSS {
        ## This is not automatically taken from themes! Why?
        theme = typo3conf/ext/yag/Resources/Public/CSS/theme.css
    }
    
    
    headerData {
    
        1 = TEXT
        1.value = <link type="text/css" href="fileadmin/jquery/css/base.css" rel="Stylesheet" />
    
        10 = TEXT
        10.value = <link type="text/css" href="fileadmin/jquery/css/ui-lightness/jquery-ui-1.8.7.custom.css" rel="Stylesheet" />
        
        20 = TEXT
        20.value = <script type="text/javascript" src="fileadmin/jquery/js/jquery-1.4.4.min.js">
        
        30 = TEXT
        30.value = </script><script type="text/javascript" src="fileadmin/jquery/js/jquery-ui-1.8.7.custom.min.js"></script>
        
    }
    

    10 = COA
    10 {
        
        10 = HTML
        10.value = <table><tr><td width="20%" valign="top">
        
        20 < plugin.tx_yag.widgets.adminMenuWidget
        
        30 = HTML
        30.value = </td><td width="80%" valign="top"><table><tr><td>
        
        32 < plugin.tx_yag.widgets.flashMessagesWidget
        
        33 = HTML
        33.value = </td></tr><tr><td>
        
        40 < plugin.tx_yag.widgets.galleryWidget
        
        50 = HTML 
        50.value = </td></tr></table></td></tr></table>
        
    }

}
